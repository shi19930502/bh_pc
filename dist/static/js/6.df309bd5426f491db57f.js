webpackJsonp([6],{"996X":function(e,t){},JpiF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=a("//Fk"),i=a.n(r),o=a("Xxa5"),n=a.n(o),d=a("exGp"),l=a.n(d),c=a("bOdI"),m=a.n(c),f=(a("+Rdb"),a("+BTi"),a("Mezo")),u=a.n(f),p=(a("qunJ"),a("vqwl")),v=a.n(p),h=(a("jAzQ"),a("wOhx")),g=a.n(h),b=(a("Yq4J"),a("qubY")),C=a.n(b),w=(a("X+ky"),a("HJMx")),x=a.n(w),y=(a("DSCY"),a("LaeV")),P=a.n(y),_=(a("IxJZ"),a("NoPp")),$=a.n(_),k=a("j/0j"),N=a("ruXz"),D=a("VNcD"),I=a("tb75"),A={mixins:[a("vsZy").a],components:(s={},m()(s,k.a.name,k.a),m()(s,N.a.name,N.a),m()(s,D.a.name,D.a),m()(s,I.a.name,I.a),m()(s,$.a.name,$.a),m()(s,P.a.name,P.a),m()(s,x.a.name,x.a),m()(s,C.a.name,C.a),m()(s,g.a.name,g.a),m()(s,v.a.name,v.a),m()(s,u.a.name,u.a),s),data:function(){var e=this;return{activeName:"0",dialogTableVisible:!1,fileList:[],uploadResult:"",rules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"}],regId:[{required:!0,message:"请输入证件号码",trigger:"blur"}],tel:[{required:!0,message:"请输入联系电话",trigger:"blur"}],oldPassword:[{required:!0,message:"请输入原始密码",trigger:"blur"}],newPassword:[{required:!0,validator:function(t,a,s){""==a||void 0==a?s(new Error("请输入密码")):/(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^[^\s\u4e00-\u9fa5]{6,16}$/.test(e.form2.newPassword)?""!==e.form2.newPassword&&(e.form2.newPassword=a,s()):s(new Error("密码长度应为6-16位, 数字, 字母, 字符至少包含两种, 不能包含中文和空格"))},trigger:"blur"}],newPassword2:[{required:!0,validator:function(t,a,s){""==a||void 0==a?s(new Error("请再次输入密码")):a!==e.form2.newPassword?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},form:{name:"",regId:"",address:"",tel:"",id:"",remark:""},form2:{oldPassword:"",newPassword:"",newPassword2:""},uploadData:{savePath:"userSetting"},filePath:"",oldPassword:"",newPassword:"",newPassword2:""}},created:function(){var e=this;this.getuser(),this.getAddress(),this.$route.params.tab?(this.activeName=this.$route.params.tab,this.postRequest("user/list",{userId:this.userInfo.userId},!1,!0).then(function(t){t.data&&0==t.data.state&&t.data.aaData&&t.data.aaData.length>0&&(e.filePath=t.data.aaData[0].filePath,e.uploadResult=t.data.aaData[0].filePath)})):this.activeName="0"},mounted:function(){},methods:{updateMyPassword:function(){var e,t=this,a={oldPassword:this.form2.oldPassword,newPassword:this.form2.newPassword,newPassword2:this.form2.newPassword2};this.$refs.form2.validate((e=l()(n.a.mark(function e(s){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,t.checkPassword();case 3:e.sent&&(a.oldPassword==a.newPassword?t.$message.error("原密码与新密码一致，无需修改"):t.postRequest("user/updateMyPassword",{oldPassword:a.oldPassword,newPassword:a.newPassword},!1,!0).then(function(e){e.data&&0==e.data.state&&(t.$message({message:"密码修改成功，请重新登录！",type:"success"}),t.logOut())})),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},checkPassword:function(){var e=this;return new i.a(function(t,a){e.postRequest("user/checkPassword",{password:e.form2.oldPassword},!1,!0).then(function(e){e.data&&0==e.data.state?t(!0):t(!1)})})},saveUserInfo:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.postRequest("customer/update",e.form).then(function(t){t.data&&0==t.data.state?(e.$message({message:"个人信息修改成功！",type:"success"}),e.getuser()):e.$message.error(t.data.msg)})})},saveHeadImgInfo:function(){var e=this;if(""==this.uploadResult||null==this.uploadResult)return this.$message("请上传图片！"),!1;this.postRequest("user/update",{userId:this.userInfo.userId,filePath:this.uploadResult},!1,!0).then(function(t){t.data&&0==t.data.state?(e.$message({message:"保存成功！",type:"success"}),e.getuser(),e.$store.commit("saveUserHeadfilePath",e.uploadResult)):e.$message.error(t.data.msg)})},getuser:function(){var e=this;this.postRequest("customer/selectById",{id:this.userInfo.typeCode}).then(function(t){if(t.data&&0==t.data.state&&t.data.aaData){for(var a in t.data.aaData)"null"!=t.data.aaData[a]&&null!=t.data.aaData[a]||(t.data.aaData[a]=null);e.form.name=t.data.aaData.name,e.form.regId=t.data.aaData.regId,e.form.address=t.data.aaData.address,e.form.tel=t.data.aaData.tel,e.form.remark=t.data.aaData.remark,e.form.id=t.data.aaData.id}})},handleClick:function(e,t){var a=this;"1"==this.activeName&&(this.fileList=[],this.postRequest("user/list",{userId:this.userInfo.userId},!1,!0).then(function(e){e.data&&0==e.data.state&&e.data.aaData&&e.data.aaData.length>0&&(a.filePath=e.data.aaData[0].filePath,a.uploadResult=e.data.aaData[0].filePath)}))},updateAdd:function(){this.getAddress()},open:function(e){this.modalEdit({type:"edit",param:e})},handleSuccess:function(e,t,a){e&&0==e.state&&(this.uploadResult=e.aaData.path)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG/GIF 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},L={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"navbar flex flex-y-center"},[e._v("个人信息")]),e._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"status-item flex flex-x-between"},[s("div",{staticClass:"flex"},[s("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"基础信息",name:"0"}},[s("div",{staticClass:"baseinfo"},[s("div",{staticClass:"form"},[s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{prop:"name",label:"昵称:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{size:"small",maxlength:50},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)])]),e._v(" "),s("el-form-item",{attrs:{prop:"regId",label:"证件号码:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{size:"small",maxlength:50},model:{value:e.form.regId,callback:function(t){e.$set(e.form,"regId",t)},expression:"form.regId"}})],1)])]),e._v(" "),s("el-form-item",{attrs:{label:"地址:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{size:"small",maxlength:200},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)])]),e._v(" "),s("el-form-item",{attrs:{prop:"tel",label:"联系电话:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{size:"small",maxlength:20},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1)])])],1),e._v(" "),s("div",{staticClass:"form-group flex flex-y-center"},[s("div",{staticClass:"lable"}),e._v(" "),s("div",{staticClass:"sbtn"},[s("shop-btn",{attrs:{height:"30px",bgcolor:"#FF4400 ",border:"1px #FF4400 ",color:"#fff",fontsize:"14px",text:"保存"},nativeOn:{click:function(t){return e.saveUserInfo(t)}}})],1)])],1)])]),e._v(" "),s("el-tab-pane",{attrs:{label:"个人头像",name:"1"}},[s("div",{staticClass:"upload-head"},[s("el-upload",{attrs:{"on-success":e.handleSuccess,"show-file-list":!1,data:e.uploadData,action:e.uploadURL+"/imgUpload?token="+e.userInfo.token,"file-list":e.fileList,"before-upload":e.beforeAvatarUpload}},[s("shop-btn",{attrs:{text:"上传头像",color:"#FF4400",fontsize:"14px",bgcolor:"#f9f9f9",border:"1px #f9f9f9",width:"224px",height:"30px",marginR:"0"}}),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("能上传jpg/png/gif文件，且不超过2M")])],1),e._v(" "),s("div",{staticClass:"pre flex flex-x-center"},[e.uploadResult?s("div",{staticClass:"uploadimg"},[s("img",{attrs:{src:e.imgURL+e.uploadResult}})]):[s("div",[s("img",{attrs:{src:a("E9Zs"),width:"159",height:"159"}}),e._v(" "),s("div",{staticClass:"tac",staticStyle:{color:"#999",width:"149px"}},[e._v("还没有上传头像")])])]],2),e._v(" "),s("div",{staticClass:"sbtn flex flex-x-center"},[s("shop-btn",{attrs:{height:"30px",bgcolor:"#FF4400",border:"1px #FF4400",width:"224px",color:"#fff",fontsize:"14px",text:"保存"},nativeOn:{click:function(t){return e.saveHeadImgInfo(t)}}})],1)],1)]),e._v(" "),s("el-tab-pane",{attrs:{label:"修改密码",name:"2"}},[s("div",{staticClass:"update-password"},[s("div",{staticClass:"form"},[s("el-form",{ref:"form2",attrs:{rules:e.rules,model:e.form2,"label-width":"100px"}},[s("el-form-item",{attrs:{prop:"oldPassword",label:"原始密码:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{type:"password",size:"small"},model:{value:e.form2.oldPassword,callback:function(t){e.$set(e.form2,"oldPassword",t)},expression:"form2.oldPassword"}})],1)])]),e._v(" "),s("el-form-item",{attrs:{prop:"newPassword",label:"新密码:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{type:"password",size:"small"},model:{value:e.form2.newPassword,callback:function(t){e.$set(e.form2,"newPassword",t)},expression:"form2.newPassword"}})],1)])]),e._v(" "),s("el-form-item",{attrs:{prop:"newPassword2",label:"确认密码:"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input"},[s("el-input",{attrs:{type:"password",size:"small"},model:{value:e.form2.newPassword2,callback:function(t){e.$set(e.form2,"newPassword2",t)},expression:"form2.newPassword2"}})],1)])])],1),e._v(" "),s("div",{staticClass:"form-group flex flex-y-center"},[s("div",{staticClass:"lable"}),e._v(" "),s("div",{staticClass:"sbtn"},[s("shop-btn",{attrs:{height:"30px",bgcolor:"#FF4400",border:"1px #FF4400",color:"#fff",fontsize:"14px",text:"提交"},nativeOn:{click:function(t){return e.updateMyPassword(t)}}})],1)])],1)])])],1)],1)])]),e._v(" "),e.modalShow?s("address-modal",{attrs:{modal:e.modalShow,params:e.modalParams},on:{close:e.modalClose,updateAdd:e.updateAdd}}):e._e()],1)},staticRenderFns:[]};var q=a("VU/8")(A,L,!1,function(e){a("ouJy")},null,null);t.default=q.exports},ouJy:function(e,t){},tb75:function(e,t,a){"use strict";var s,r=a("BO1k"),i=a.n(r),o=a("bOdI"),n=a.n(o),d=(a("+Rdb"),a("+BTi"),a("Mezo")),l=a.n(d),c=(a("qunJ"),a("vqwl")),m=a.n(c),f=(a("Yq4J"),a("qubY")),u=a.n(f),p=(a("I4nB"),a("STLj")),v=a.n(p),h=(a("cDSy"),a("e0Bm")),g=a.n(h),b=(a("X+ky"),a("HJMx")),C=a.n(b),w=a("VNcD"),x={name:"address-modal",mixins:[a("vsZy").a],components:(s={},n()(s,w.a.name,w.a),n()(s,C.a.name,C.a),n()(s,g.a.name,g.a),n()(s,v.a.name,v.a),n()(s,u.a.name,u.a),n()(s,m.a.name,m.a),n()(s,l.a.name,l.a),s),props:{modal:{default:!1},params:{default:function(){return{}}}},data:function(){return{type:"add",rules:{contacts:[{required:!0,message:"请填写收货人",trigger:"blur"}],phoneNumber:[{required:!0,message:"请填写联系电话",trigger:"blur"}],detailedAddress:[{required:!0,message:"请填写详细地址",trigger:"blur"}]},form:{id:"",districtName:"",detailedAddress:"",completeAddress:"",contacts:"",phoneNumber:"",customerId:"",provinceCode:"",cityCode:"",districCode:"",comment:"",provinceName:"",cityName:"",districName:""},ProvinceList:[],CityList:[],DistricList:[],addressInfo:null}},created:function(){this.getProvinceList(),"edit"==this.params.type&&(this.type=this.params.type,this.form=this.params.param,this.getCityList(),this.getDistricList()),"add"==this.params.type&&(this.type=this.params.type)},mounted:function(){},methods:{inputLimit:function(){/^[0-9]*$/.test(this.form.phoneNumber)||(this.form.phoneNumber=this.form.phoneNumber.replace(/[^\w]/g,""))},setcompleteAddress:function(){this.form.completeAddress=this.form.provinceName+this.form.cityName+this.form.districName+this.form.detailedAddress},saveAdd:function(){var e=this,t={id:this.form.id,provinceCode:this.form.provinceCode,cityCode:this.form.cityCode,districCode:this.form.districCode,detailedAddress:this.form.detailedAddress,contacts:this.form.contacts,phoneNumber:this.form.phoneNumber,customerId:this.form.customerId,comment:this.form.comment},a="address/create";"edit"==this.type?a="address/update":t.customerId=this.userInfo.typeCode,this.$refs.form.validate(function(s){if(!s)return!1;""!=t.provinceCode?""!=t.cityCode?""!=t.districCode?e.postRequest(a,t).then(function(t){t.data&&0==t.data.state?(e.$message({message:"保存成功！",type:"success"}),e.close(),e.$emit("updateAdd")):t.data&&2==t.data.state?(e.$message(t.data.msg),e.close()):e.$message.error(t.data.msg)}):e.$message.error("请选择所在县/区！"):e.$message.error("请选择所在市！"):e.$message.error("请选择所在省份！")})},getProvinceList:function(){var e=this;this.postRequest("comArea/list",{level:1}).then(function(t){t.data&&0==t.data.state&&(e.ProvinceList=t.data.aaData)})},changeProvinceList:function(){this.form.cityCode="",this.form.districCode="",this.form.cityName="",this.form.districName="";var e=!0,t=!1,a=void 0;try{for(var s,r=i()(this.ProvinceList);!(e=(s=r.next()).done);e=!0){var o=s.value;this.form.provinceCode==o.areaCode&&(this.form.provinceName=o.areaName)}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}this.setcompleteAddress(),this.getCityList()},getCityList:function(){var e=this;this.postRequest("comArea/list",{parentAreaCode:this.form.provinceCode,level:2}).then(function(t){t.data&&0==t.data.state&&(e.CityList=t.data.aaData)})},changeCityList:function(){this.form.districCode="",this.form.districName="";var e=!0,t=!1,a=void 0;try{for(var s,r=i()(this.CityList);!(e=(s=r.next()).done);e=!0){var o=s.value;this.form.cityCode==o.areaCode&&(this.form.cityName=o.areaName)}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}this.setcompleteAddress(),this.getDistricList()},getDistricList:function(){var e=this;this.postRequest("comArea/list",{parentAreaCode:this.form.cityCode,level:3}).then(function(t){t.data&&0==t.data.state&&(e.DistricList=t.data.aaData)})},changeDistricList:function(){var e=!0,t=!1,a=void 0;try{for(var s,r=i()(this.DistricList);!(e=(s=r.next()).done);e=!0){var o=s.value;this.form.districCode==o.areaCode&&(this.form.districName=o.areaName)}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}this.setcompleteAddress()},close:function(){this.$emit("close")},beforeClose:function(e){this.close(),e()},toShoppingCar:function(){this.$emit("toShoppingCar")}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"收货地址管理",visible:e.modal,"close-on-click-modal":!1,"before-close":e.beforeClose}},[a("div",{attrs:{id:"addressModal"}},[a("div",{staticClass:"modal-form"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[a("el-form-item",{attrs:{prop:"contacts",label:"联系人:"}},[a("div",{staticClass:"form-group"},[a("div",[a("el-input",{attrs:{size:"small",maxlength:30},model:{value:e.form.contacts,callback:function(t){e.$set(e.form,"contacts",t)},expression:"form.contacts"}})],1)])]),e._v(" "),a("el-form-item",[a("div",{staticClass:"form-group flex flex-x-between"},[a("div",{staticClass:"el-selectdiv"},[a("p",[e._v("所在省份：")]),e._v(" "),a("div",[a("el-select",{attrs:{placeholder:"--请选择--",size:"small"},on:{change:e.changeProvinceList},model:{value:e.form.provinceCode,callback:function(t){e.$set(e.form,"provinceCode",t)},expression:"form.provinceCode"}},e._l(e.ProvinceList,function(e){return a("el-option",{key:e.areaCode,attrs:{label:e.areaName,value:e.areaCode}})}))],1)]),e._v(" "),a("div",{staticClass:"el-selectdiv"},[a("p",[e._v("所在市：")]),e._v(" "),a("div",[a("el-select",{attrs:{placeholder:"--请选择--",size:"small"},on:{change:e.changeCityList},model:{value:e.form.cityCode,callback:function(t){e.$set(e.form,"cityCode",t)},expression:"form.cityCode"}},e._l(e.CityList,function(e){return a("el-option",{key:e.areaCode,attrs:{label:e.areaName,value:e.areaCode}})}))],1)]),e._v(" "),a("div",{staticClass:"el-selectdiv"},[a("p",[e._v("所在区/县：")]),e._v(" "),a("div",[a("el-select",{attrs:{placeholder:"--请选择--",size:"small"},on:{change:e.changeDistricList},model:{value:e.form.districCode,callback:function(t){e.$set(e.form,"districCode",t)},expression:"form.districCode"}},e._l(e.DistricList,function(e){return a("el-option",{key:e.areaCode,attrs:{label:e.areaName,value:e.areaCode}})}))],1)])])]),e._v(" "),a("el-form-item",{attrs:{prop:"detailedAddress",label:"详细地址:"}},[a("div",{staticClass:"form-group"},[a("div",[a("el-input",{attrs:{size:"small",maxlength:100},on:{input:e.setcompleteAddress},model:{value:e.form.detailedAddress,callback:function(t){e.$set(e.form,"detailedAddress",t)},expression:"form.detailedAddress"}})],1)])]),e._v(" "),a("el-form-item",[a("div",{staticClass:"form-group"},[a("p",[e._v("完整信息：")]),e._v(" "),a("div",[e._v("\n              "+e._s(e.form.completeAddress)+"\n              ")])])]),e._v(" "),a("el-form-item",{attrs:{prop:"phoneNumber",label:"联系电话:"}},[a("div",{staticClass:"form-group"},[a("div",[a("el-input",{attrs:{size:"small",maxlength:11},nativeOn:{keyup:function(t){return e.inputLimit(t)}},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",e._n(t))},expression:"form.phoneNumber"}})],1)])]),e._v(" "),a("el-form-item",[a("div",{staticClass:"form-group"},[a("p",[e._v("备注：")]),e._v(" "),a("div",[a("el-input",{attrs:{size:"small",maxlength:200},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)])]),e._v(" "),a("div",{staticClass:"sbtn flex flex-x-center"},[a("shop-btn",{attrs:{height:"30px",bgcolor:"#FF4400",border:"1px #FF4400",color:"#fff",fontsize:"14px",text:"保存地址"},nativeOn:{click:function(t){return e.saveAdd(t)}}})],1)],1)],1)])])},staticRenderFns:[]};var P=a("VU/8")(x,y,!1,function(e){a("996X")},null,null);t.a=P.exports}});
//# sourceMappingURL=6.df309bd5426f491db57f.js.map