webpackJsonp([16],{DlXW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=a("BO1k"),r=a.n(s),c=a("bOdI"),n=a.n(c),o=(a("dmRH"),a("+BTi"),a("EKTV")),l=a.n(o),d=(a("DSCY"),a("LaeV")),u=a.n(d),h=(a("IxJZ"),a("NoPp")),v=a.n(h),p=(a("ylrw"),a("6oiW")),f=a.n(p),m=a("j/0j"),x=a("ruXz"),k=a("VNcD"),g={mixins:[a("vsZy").a],components:(i={},n()(i,m.a.name,m.a),n()(i,x.a.name,x.a),n()(i,k.a.name,k.a),n()(i,f.a.name,f.a),n()(i,v.a.name,v.a),n()(i,u.a.name,u.a),n()(i,l.a.name,l.a),i),data:function(){return{productcollection:[],dataCount:0,pageNum:1,pageSize:8,activeName:"0",currentPage:1,showCheckbox:!1,allclick:!1,isPromotion:""}},created:function(){this.getProductcollection()},mounted:function(){},methods:{addShippingcarBySku:function(t){var e=this,a=t,i="shippingcar/create";this.postRequest("shippingcar/list",{buyerId:this.userInfo.typeCode}).then(function(t){if(t.data&&0==t.data.state){var s=[],c=[],n={buyerId:e.userInfo.typeCode,productId:a.productId,productName:a.productName,skuId:a.skuId,skuName:a.skuName,quantity:1,comment:a.remark||"",sellerId:a.sellerId||a.supplierId-0||e.sellerId},o=!0,l=!1,d=void 0;try{for(var u,h=r()(t.data.aaData);!(o=(u=h.next()).done);o=!0){var v=u.value;if(v.sellerId==n.sellerId){s.push(v.skuId);var p={skuId:v.skuId,id:v.id};c.push(p)}}}catch(t){l=!0,d=t}finally{try{!o&&h.return&&h.return()}finally{if(l)throw d}}if(e.isInArray(s,n.skuId)){i="shippingcar/update";var f=!0,m=!1,x=void 0;try{for(var k,g=r()(c);!(f=(k=g.next()).done);f=!0){var y=k.value;n.skuId==y.skuId&&(n.id=y.id-0)}}catch(t){m=!0,x=t}finally{try{!f&&g.return&&g.return()}finally{if(m)throw x}}}else i="shippingcar/create";n.sellerId?e.postRequest(i,n).then(function(t){t.data&&0==t.data.state?(e.$message({message:"加入购物车成功，可在购物车中查看！",type:"success"}),a.checkboxed&&(a.checkboxed=!1),e.getShopCarCount()):e.$message.error("加入购物车失败！")}):e.$message.error("加入购物车失败！")}})},getProductcollection:function(){var t=this;this.postRequest("productcollection/querylistByCustomerId",{customerId:this.userInfo.typeCode,pageNum:this.pageNum,pageSize:this.pageSize,isPromotion:this.isPromotion}).then(function(e){if(e.data&&0==e.data.state){var a=!0,i=!1,s=void 0;try{for(var c,n=r()(e.data.aaData);!(a=(c=n.next()).done);a=!0){c.value.checkboxed=!1}}catch(t){i=!0,s=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw s}}t.productcollection=e.data.aaData,t.dataCount=e.data.dataCount}})},handleCurrentChange:function(t){this.pageNum=t,this.getProductcollection()},handleClick:function(t,e){"1"==this.activeName?this.isPromotion=this.activeName:this.isPromotion="",this.getProductcollection()},piliang:function(){this.showCheckbox=!this.showCheckbox},allChecked:function(){if(this.allclick=!this.allclick,this.allclick){var t=!0,e=!1,a=void 0;try{for(var i,s=r()(this.productcollection);!(t=(i=s.next()).done);t=!0){i.value.checkboxed=!0}}catch(t){e=!0,a=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw a}}}else{var c=!0,n=!1,o=void 0;try{for(var l,d=r()(this.productcollection);!(c=(l=d.next()).done);c=!0){l.value.checkboxed=!1}}catch(t){n=!0,o=t}finally{try{!c&&d.return&&d.return()}finally{if(n)throw o}}}},delpc:function(){this.allclick=!this.allclick;var t=[],e=!0,a=!1,i=void 0;try{for(var s,c=r()(this.productcollection);!(e=(s=c.next()).done);e=!0){(h=s.value).checkboxed&&t.push(h)}}catch(t){a=!0,i=t}finally{try{!e&&c.return&&c.return()}finally{if(a)throw i}}if(0==t.length)this.$message("至少选择一个商品操作！");else{var n=!0,o=!1,l=void 0;try{for(var d,u=r()(t);!(n=(d=u.next()).done);n=!0){var h=d.value;this.deleteByCustomerIdAndSkuId(h.skuId)}}catch(t){o=!0,l=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}}},addCarpl:function(){var t=[];this.allclick=!this.allclick;var e=!0,a=!1,i=void 0;try{for(var s,c=r()(this.productcollection);!(e=(s=c.next()).done);e=!0){(h=s.value).checkboxed&&t.push(h)}}catch(t){a=!0,i=t}finally{try{!e&&c.return&&c.return()}finally{if(a)throw i}}if(0==t.length)this.$message("至少选择一个商品操作！");else{var n=!0,o=!1,l=void 0;try{for(var d,u=r()(t);!(n=(d=u.next()).done);n=!0){var h=d.value;this.addShippingcarBySku(h)}}catch(t){o=!0,l=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}}},deleteByCustomerIdAndSkuId:function(t){var e=this;this.postRequest("productcollection/deleteByCustomerIdAndSkuId",{customerId:this.userInfo.typeCode,skuId:t}).then(function(a){if(a.data&&0==a.data.state){for(var i in e.productcollection)e.productcollection[i].skuId==t&&e.productcollection.splice(i,1);e.$message({message:"操作成功！",type:"success"}),e.getProductcollection()}})}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"collectionPro"}},[i("div",{staticClass:"navbar flex flex-y-center"},[t._v("收藏商品")]),t._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"status-item flex flex-x-between"},[i("div",{staticClass:"flex"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"全部商品",name:"0"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"促销商品",name:"1"}})],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.productcollection.length>0,expression:"productcollection.length>0"}],staticClass:"flex"},[i("shop-btn",{attrs:{width:"74px",height:"26px",text:"批量操作",fontsize:"12px",marginR:"10px"},nativeOn:{click:function(e){return t.piliang(e)}}}),t._v(" "),i("shop-btn",{directives:[{name:"show",rawName:"v-show",value:t.showCheckbox,expression:"showCheckbox"}],attrs:{width:"74px",height:"26px",text:t.allclick?"取消全选":"全选",fontsize:"12px",marginR:"10px"},nativeOn:{click:function(e){return t.allChecked(e)}}}),t._v(" "),i("shop-btn",{directives:[{name:"show",rawName:"v-show",value:t.showCheckbox,expression:"showCheckbox"}],attrs:{width:"74px",height:"26px",text:"删除",fontsize:"12px",marginR:"10px"},nativeOn:{click:function(e){return t.delpc(e)}}}),t._v(" "),i("shop-btn",{directives:[{name:"show",rawName:"v-show",value:t.showCheckbox,expression:"showCheckbox"}],attrs:{width:"74px",height:"26px",text:"加入购物车",fontsize:"12px",marginR:"0px"},nativeOn:{click:function(e){return t.addCarpl(e)}}})],1)]),t._v(" "),t.productcollection.length>0?[i("ul",{staticClass:"pro-list flex"},t._l(t.productcollection,function(e){return i("li",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showCheckbox,expression:"showCheckbox"}],staticClass:"checkbox-w"},[i("el-checkbox",{model:{value:e.checkboxed,callback:function(a){t.$set(e,"checkboxed",a)},expression:"d.checkboxed"}})],1),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"pro-img"},[e.skuPic?i("img",{attrs:{src:t.imgURL+e.skuPic}}):e.proPic?i("img",{attrs:{src:t.imgURL+e.proPic}}):i("img",{attrs:{src:a("vmrj")}}),t._v(" "),1==e.isMuslim?i("div",{staticClass:"muslim"},[i("img",{attrs:{src:a("OMlq"),alt:""}})]):t._e()]),t._v(" "),i("div",{staticClass:"pro-text"},[i("div",{staticClass:"pro-price flex flex-x-between flex-y-center"},[e.promotionPrice>0&&e.promotionBasePrice>0?i("div",{staticClass:"p1"},[t._v(t._s("￥"+e.promotionPrice))]):i("div",{staticClass:"p1"},[t._v(t._s("￥"+e.price))]),t._v(" "),e.promotionPrice<e.price?i("div",{staticClass:"flex"},[i("div",{staticClass:"p2"},[t._v(t._s("￥"+e.price))]),t._v(" "),t._m(0,!0)]):t._e()]),t._v(" "),i("div",{staticClass:"pro-name"},[t._v(t._s(e.productName+"["+e.skuName+"]"))]),t._v(" "),i("div",{staticClass:"pro-ms"},[t._v(t._s(e.sellerName))]),t._v(" "),i("div",{staticClass:"pro-ms"},[t._v("计量方式："+t._s(1==e.skuMethodType?"计重":"计件"))])]),t._v(" "),i("div",{staticClass:"pro-btns flex flex-y-center flex-x-center",on:{click:function(a){t.addShippingcarBySku(e)}}},[i("img",{attrs:{src:a("PWFR"),alt:""}}),t._v(" "),i("span",[t._v("加入购物车")])])])])})),t._v(" "),i("div",{staticClass:"flex flex-x-end"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.dataCount,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)]:i("div",{staticClass:"flex flex-x-center flex-y-center",staticStyle:{height:"444px",color:"#d1d1d1"}},[t._m(1)])],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cuxbg flex flex-y-center flex-x-center"},[e("span",[this._v("促销")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:a("vmrj")}}),this._v(" "),e("p",{staticClass:"tac"},[this._v("暂无商品")])])}]};var C=a("VU/8")(g,y,!1,function(t){a("fwqQ")},null,null);e.default=C.exports},fwqQ:function(t,e){}});
//# sourceMappingURL=16.1b561e485b481fd196a5.js.map