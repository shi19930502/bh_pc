{"version":3,"sources":["webpack:///src/views/message/message.vue","webpack:///./src/views/message/message.vue?04d3","webpack:///./src/views/message/message.vue"],"names":["message","mixins","components","_components","defineProperty_default","header","name","footer","shopbtn","search","lib_badge_default","a","lib_dialog_default","lib_table_default","lib_table_column_default","lib_input_number_default","lib_pagination_default","data","pageSize","pageNum","productDataCount","megList","count","msgFileList","created","this","$route","query","id","readMsg","getUserMessageAll","mounted","methods","_this","postRequest","then","resp","state","geMsgFile","aaData","_this2","customerId","userInfo","userId","d","dataCount","handleCurrentChange","val","arr","_this3","length","param","sourceObjectType","sourceObjectId","file","queryMsgFileByPage","console","log","message_message","render","_vm","_h","$createElement","_c","_self","attrs","_v","showClassify","pageName","staticClass","_m","_l","_s","publishedDate","title","comment","customerName","href","imgURL","filePath","fileName","_e","staticStyle","margin-top","background","small","layout","total","page-size","on","current-change","height","color","staticRenderFns","src","__webpack_require__","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sZA6EAA,GACAC,kBAAA,GACAC,YAAAC,KAAAC,IAAAD,EACAE,EAAA,EAAAC,KAAAD,EAAA,GADAD,IAAAD,EAEAI,EAAA,EAAAD,KAAAC,EAAA,GAFAH,IAAAD,EAGAK,EAAA,EAAAF,KAAAE,EAAA,GAHAJ,IAAAD,EAIAM,EAAA,EAAAH,KAAAG,EAAA,GAJAL,IAAAD,EAOAO,EAAAC,EAAAL,KAPAI,EAAAC,GAAAP,IAAAD,EAQAS,EAAAD,EAAAL,KARAM,EAAAD,GAAAP,IAAAD,EASAU,EAAAF,EAAAL,KATAO,EAAAF,GAAAP,IAAAD,EAUAW,EAAAH,EAAAL,KAVAQ,EAAAH,GAAAP,IAAAD,EAWAY,EAAAJ,EAAAL,KAXAS,EAAAJ,GAAAP,IAAAD,EAYAa,EAAAL,EAAAL,KAZAU,EAAAL,GAAAR,GAeAc,KAjBA,WAkBA,OACAC,SAAA,EACAC,QAAA,EACAC,iBAAA,EACAC,WACAC,MAAA,EACAC,iBAGAC,QA3BA,WA6BAC,KAAAC,OAAAC,MAAAC,GACAH,KAAAI,QAAAJ,KAAAC,OAAAC,MAAAC,IAEAH,KAAAK,qBAKAC,QArCA,aAsCAC,SAIAH,QAJA,SAIAD,GAAA,IAAAK,EAAAR,KACAA,KAAAS,YAAA,gCACAN,OACAO,KAAA,SAAAC,GACAA,EAAAnB,MAAA,GAAAmB,EAAAnB,KAAAoB,QACAJ,EAAAK,WAAAF,EAAAnB,KAAAsB,SACAN,EAAAb,iBAAA,MAOAU,kBAjBA,WAiBA,IAAAU,EAAAf,KACAA,KAAAS,YAAA,2BACAO,WAAAhB,KAAAiB,SAAAC,OACAxB,QAAAM,KAAAN,QACAD,SAAAO,KAAAP,WACAiB,KAAA,SAAAS,GACAA,EAAA3B,MAAA,GAAA2B,EAAA3B,KAAAoB,QACAG,EAAAF,UAAAM,EAAA3B,KAAAsB,QACAC,EAAApB,iBAAAwB,EAAA3B,KAAA4B,cAIAC,oBA7BA,SA6BAC,GACAtB,KAAAN,QAAA4B,EACAtB,KAAAK,qBAKAQ,UApCA,SAoCAU,GAAA,IAAAC,EAAAxB,KACA,GAAAA,KAAAH,MAAA0B,EAAAE,OAAA,CACA,IAAAC,GACAC,iBAAA,MACAC,eAAAL,EAAAvB,KAAAH,OAAAM,IAEAH,KAAAS,YAAA,wBAAAiB,GAAAhB,KAAA,SAAAS,GACAA,EAAA3B,MAAA,GAAA2B,EAAA3B,KAAAoB,QACAO,EAAA3B,KAAAsB,OAAAW,OAAA,IACAF,EAAAC,EAAA3B,OAAAgC,KAAAV,EAAA3B,KAAAsB,OAAA,IAEAU,EAAA3B,QACA2B,EAAAX,UAAAU,WAIAvB,KAAAJ,QAAA2B,GAMAO,mBA1DA,WA2DA9B,KAAAS,YAAA,yCACAO,WAAAhB,KAAAiB,SAAAC,OACAxB,QAAAM,KAAAN,QACAD,SAAAO,KAAAP,WACAiB,KAAA,SAAAS,GACAA,EAAA3B,MAAA,GAAA2B,EAAA3B,KAAAoB,OACAmB,QAAAC,IAAAb,EAAA3B,KAAAsB,aCjLAmB,GADiBC,OAFjB,WAA0B,IAAAC,EAAAnC,KAAaoC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOrC,GAAA,gBAAmBmC,EAAA,eAAAH,EAAAM,GAAA,KAAAH,EAAA,eAAkDE,OAAOE,cAAA,EAAAC,SAAA,QAAsCR,EAAAM,GAAA,KAAAH,EAAA,WAA4BM,YAAA,iBAA2BN,EAAA,OAAYM,YAAA,kCAA4CT,EAAAU,GAAA,GAAAV,EAAAM,GAAA,KAAAH,EAAA,OAAkCM,YAAA,mBAA6BN,EAAA,OAAYM,YAAA,8BAAwCT,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCM,YAAA,SAAmBT,EAAAvC,QAAA6B,OAAA,EAAAa,EAAA,OAAAA,EAAA,MAA4CE,OAAOrC,GAAA,YAAgBgC,EAAAW,GAAAX,EAAA,iBAAAhB,GAAkC,OAAAmB,EAAA,MAAAA,EAAA,OAA0BM,YAAA,uBAAiCN,EAAA,OAAYM,YAAA,SAAmBT,EAAAM,GAAAN,EAAAY,GAAA5B,EAAA6B,oBAAAb,EAAAM,GAAA,KAAAH,EAAA,OAA4DM,YAAA,QAAkBN,EAAA,OAAYM,YAAA,cAAwBT,EAAAM,GAAAN,EAAAY,GAAA5B,EAAA8B,UAAAd,EAAAM,GAAA,KAAAH,EAAA,OAAkDM,YAAA,aAAuBT,EAAAM,GAAAN,EAAAY,GAAA5B,EAAA+B,YAAAf,EAAAM,GAAA,KAAAH,EAAA,OAAoDM,YAAA,eAAyBT,EAAAM,GAAAN,EAAAY,GAAA5B,EAAAgC,iBAAAhB,EAAAM,GAAA,KAAAtB,EAAA,KAAAmB,EAAA,OAAAA,EAAA,QAAAH,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,KAAmHM,YAAA,UAAAJ,OAA6BY,KAAAjB,EAAAkB,OAAAlC,EAAAU,KAAAyB,SAAA,IAAAnC,EAAAU,KAAA0B,YAAuDpB,EAAAM,GAAAN,EAAAY,GAAA5B,EAAAU,KAAA0B,eAAApB,EAAAqB,YAAmDrB,EAAAM,GAAA,KAAAH,EAAA,OAAyBM,YAAA,kBAAAa,aAA2CC,aAAA,UAAqBpB,EAAA,iBAAsBE,OAAOmB,WAAA,GAAAC,MAAA,GAAAC,OAAA,0BAAAC,MAAA3B,EAAAxC,iBAAAoE,YAAA5B,EAAA1C,UAAoHuE,IAAKC,iBAAA9B,EAAAd,wBAA0C,KAAAiB,EAAA,OAAkBM,YAAA,oCAAAa,aAA6DS,OAAA,QAAAC,MAAA,aAAoChC,EAAAU,GAAA,aAAAV,EAAAM,GAAA,KAAAH,EAAA,oBAE7jD8B,iBADjB,WAAoC,IAAahC,EAAbpC,KAAaqC,eAA0BC,EAAvCtC,KAAuCuC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBM,YAAA,mBAA6BN,EAAA,MAAAA,EAAA,MAAAA,EAAA,UAA7GtC,KAA6GyC,GAAA,QAA7GzC,KAA6GyC,GAAA,KAAAH,EAAA,KAA7GtC,KAA6GyC,GAAA,iBAA2F,WAAc,IAAaL,EAAbpC,KAAaqC,eAA0BC,EAAvCtC,KAAuCuC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,OAAO6B,IAAAC,EAAA,WAAjGtE,KAA0JyC,GAAA,KAAAH,EAAA,KAAsBM,YAAA,QAAhL5C,KAAkMyC,GAAA,eCE5b,IAcA8B,EAdAD,EAAA,OAcAE,CACAjG,EACA0D,GATA,EAVA,SAAAwC,GACAH,EAAA,SAaA,KAEA,MAUAI,EAAA,QAAAH,EAAA","file":"static/js/18.ea9b4661d235e3e82fc8.js","sourcesContent":["<template>\r\n  <div id=\"userCenter\">\r\n    <shop-header />\r\n    <!--搜索-->\r\n    <shop-search :showClassify=\"false\" pageName=\"消息\" />\r\n\r\n    <!--主体-->\r\n    <section class=\"user-content\">\r\n      <div class=\"min-width flex flex-x-between\">\r\n        <div class=\"user-content-l\">\r\n          <ul>\r\n            <li>\r\n              <strong>消息</strong>\r\n              <p>我的消息</p>\r\n              <!--<router-link to=\"/userCenter/orderList\">我的订单</router-link>\r\n\t\t\t\t\t\t\t<router-link to=\"/userCenter/orderEvaluate\">订单评价</router-link>-->\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"user-content-r\">\r\n          <!--<router-view></router-view>-->\r\n          <div class=\"navbar flex flex-y-center\">我的消息</div>\r\n          <div class=\"main\">\r\n            <div v-if=\"megList.length>0\">\r\n              <ul id=\"msglist\">\r\n                <li v-for=\"d in megList\">\r\n                  <div class=\"flex flex-x-center\">\r\n                    <div class=\"date\">{{d.publishedDate}}</div>\r\n                  </div>\r\n                  <div class=\"mes\">\r\n                    <div class=\"mes-title\">{{d.title}}</div>\r\n                    <div class=\"mes-body\">{{d.comment}}</div>\r\n                    <div class=\"mes-sender\">{{d.customerName}}</div>\r\n                    <div v-if=\"d.file\">\r\n                      <span>附件下载：</span>\r\n                      <a :href=\"imgURL+d.file.filePath+'?'+d.file.fileName\" class=\"click-a\">{{d.file.fileName}}</a>\r\n                    </div>\r\n\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n              <div class=\"flex flex-x-end\" style=\"margin-top: 20px;\">\r\n                <el-pagination background small layout=\"total,prev, pager, next\" :total=\"productDataCount\" @current-change=\"handleCurrentChange\"\r\n                  :page-size=\"pageSize\">\r\n                </el-pagination>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\" flex flex-x-center flex-y-center\" style=\"height: 544px;color: #d1d1d1;\">\r\n              <div>\r\n                <img src=\"../../../static/img/my_default_img.png\" />\r\n                <p class=\"tac\">暂无消息</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <shop-footer />\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  import ShopTop from '../components/header.vue'\r\n  import ShopFooter from '../components/footer.vue'\r\n  import btn from '../components/shopbtn.vue'\r\n  import Search from '../components/search.vue'\r\n\r\n  import {\r\n    Badge,\r\n    Dialog,\r\n    Table,\r\n    TableColumn,\r\n    InputNumber,\r\n    Pagination\r\n  } from 'element-ui'\r\n  import mixin from '../../utils/mixin.js'\r\n  export default {\r\n    mixins: [mixin],\r\n    components: {\r\n      [ShopTop.name]: ShopTop,\r\n      [ShopFooter.name]: ShopFooter,\r\n      [btn.name]: btn,\r\n      [Search.name]: Search,\r\n\r\n      // element component\r\n      [Badge.name]: Badge,\r\n      [Dialog.name]: Dialog,\r\n      [Table.name]: Table,\r\n      [TableColumn.name]: TableColumn,\r\n      [InputNumber.name]: InputNumber,\r\n      [Pagination.name]: Pagination,\r\n\r\n    },\r\n    data() {\r\n      return {\r\n        pageSize: 5,\r\n        pageNum: 1,\r\n        productDataCount: 0,\r\n        megList: [],\r\n        count: 0,\r\n        msgFileList: []\r\n      }\r\n    },\r\n    created() {\r\n      // 获取消息id\r\n      if (this.$route.query.id) {\r\n        this.readMsg(this.$route.query.id)\r\n      } else {\r\n        this.getUserMessageAll()\r\n      }\r\n\t\t\t\r\n\t\t\t// this.queryMsgFileByPage()\r\n    },\r\n    mounted() {},\r\n    methods: {\r\n      /**\r\n       * 查看消息\r\n       */\r\n      readMsg(id) {\r\n        this.postRequest('platformnoticeflow/queryById', {\r\n          id: id\r\n        }).then(resp => {\r\n          if (resp.data && resp.data.state == 0) {\r\n            this.geMsgFile([resp.data.aaData])\r\n            this.productDataCount = 1\r\n          }\r\n        })\r\n      },\r\n      /**\r\n       * 获取消息列表\r\n       */\r\n      getUserMessageAll() {\r\n        this.postRequest('platformnoticeflow/list', {\r\n          customerId: this.userInfo.userId,\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize\r\n        }).then(d => {\r\n          if (d.data && d.data.state == 0) {\r\n            this.geMsgFile(d.data.aaData)\r\n            this.productDataCount = d.data.dataCount\r\n          }\r\n        })\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.pageNum = val\r\n        this.getUserMessageAll()\r\n      },\r\n      /**\r\n       * 递归获取获取附件\r\n       */\r\n      geMsgFile(arr) {\r\n        if (this.count < arr.length) {\r\n          var param = {\r\n            sourceObjectType: '002', //公告附件\r\n            sourceObjectId: arr[this.count].id,\r\n          }\r\n          this.postRequest('uploadfilerecode/list', param).then(d => {\r\n            if (d.data && d.data.state == 0) {\r\n              if (d.data.aaData.length > 0) {\r\n                arr[this.count].file = d.data.aaData[0]\r\n              }\r\n              this.count++\r\n                this.geMsgFile(arr)\r\n            }\r\n          })\r\n        } else {\r\n          this.megList = arr\r\n        }\r\n      },\r\n      /**\r\n       * 通过接口获取通知及附件\r\n       */\r\n      queryMsgFileByPage() {\r\n        this.postRequest('platformnoticeflow/queryMsgFileByPage', {\r\n          customerId: this.userInfo.userId,\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize\r\n        }).then(d => {\r\n          if (d.data && d.data.state == 0) {\r\n            console.log(d.data.aaData)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\">\r\n  @import '../../assets/css/userCenter.scss';\r\n  .router-link-active {\r\n    color: #FF4400 !important;\r\n  }\r\n\r\n  #msglist {\r\n    li {\r\n      margin-top: 30px;\r\n    }\r\n    .date {\r\n      height: 20px;\r\n      line-height: 20px;\r\n      background: #f7f7f7;\r\n      width: 144px;\r\n      text-align: center;\r\n      color: #666;\r\n      margin-bottom: 20px;\r\n    }\r\n    .mes {\r\n      padding: 10px 20px;\r\n      background: #f7f7f7;\r\n      .mes-title {\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n        border-bottom: 1px solid #D3D3D3;\r\n        padding-bottom: 10px;\r\n      }\r\n      .mes-body {\r\n        padding: 10px 0;\r\n      }\r\n      .mes-sender {\r\n        padding-bottom: 6px;\r\n        font-size: 12px;\r\n        color: #999999;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/message/message.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"userCenter\"}},[_c('shop-header'),_vm._v(\" \"),_c('shop-search',{attrs:{\"showClassify\":false,\"pageName\":\"消息\"}}),_vm._v(\" \"),_c('section',{staticClass:\"user-content\"},[_c('div',{staticClass:\"min-width flex flex-x-between\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"user-content-r\"},[_c('div',{staticClass:\"navbar flex flex-y-center\"},[_vm._v(\"我的消息\")]),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[(_vm.megList.length>0)?_c('div',[_c('ul',{attrs:{\"id\":\"msglist\"}},_vm._l((_vm.megList),function(d){return _c('li',[_c('div',{staticClass:\"flex flex-x-center\"},[_c('div',{staticClass:\"date\"},[_vm._v(_vm._s(d.publishedDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"mes\"},[_c('div',{staticClass:\"mes-title\"},[_vm._v(_vm._s(d.title))]),_vm._v(\" \"),_c('div',{staticClass:\"mes-body\"},[_vm._v(_vm._s(d.comment))]),_vm._v(\" \"),_c('div',{staticClass:\"mes-sender\"},[_vm._v(_vm._s(d.customerName))]),_vm._v(\" \"),(d.file)?_c('div',[_c('span',[_vm._v(\"附件下载：\")]),_vm._v(\" \"),_c('a',{staticClass:\"click-a\",attrs:{\"href\":_vm.imgURL+d.file.filePath+'?'+d.file.fileName}},[_vm._v(_vm._s(d.file.fileName))])]):_vm._e()])])})),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-x-end\",staticStyle:{\"margin-top\":\"20px\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"small\":\"\",\"layout\":\"total,prev, pager, next\",\"total\":_vm.productDataCount,\"page-size\":_vm.pageSize},on:{\"current-change\":_vm.handleCurrentChange}})],1)]):_c('div',{staticClass:\" flex flex-x-center flex-y-center\",staticStyle:{\"height\":\"544px\",\"color\":\"#d1d1d1\"}},[_vm._m(1)])])])])]),_vm._v(\" \"),_c('shop-footer')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-content-l\"},[_c('ul',[_c('li',[_c('strong',[_vm._v(\"消息\")]),_vm._v(\" \"),_c('p',[_vm._v(\"我的消息\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('img',{attrs:{\"src\":require(\"../../../static/img/my_default_img.png\")}}),_vm._v(\" \"),_c('p',{staticClass:\"tac\"},[_vm._v(\"暂无消息\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7c441700\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/message/message.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7c441700\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./message.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7c441700\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/message/message.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}