webpackJsonp([18],{ISTn:function(t,e){},fgdu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,i=a("bOdI"),n=a.n(i),l=(a("ylrw"),a("+BTi"),a("6oiW")),r=a.n(l),o=(a("Zki6"),a("0kY3")),c=a.n(o),u=(a("Dte2"),a("q4le")),d=a.n(u),f=(a("isE6"),a("LR6y")),h=a.n(f),g=(a("Yq4J"),a("qubY")),m=a.n(g),v=(a("akml"),a("wZaX")),p=a.n(v),_=a("j/0j"),C=a("ruXz"),x=a("VNcD"),y=a("7R5U"),q={mixins:[a("vsZy").a],components:(s={},n()(s,_.a.name,_.a),n()(s,C.a.name,C.a),n()(s,x.a.name,x.a),n()(s,y.a.name,y.a),n()(s,p.a.name,p.a),n()(s,m.a.name,m.a),n()(s,h.a.name,h.a),n()(s,d.a.name,d.a),n()(s,c.a.name,c.a),n()(s,r.a.name,r.a),s),data:function(){return{pageSize:5,pageNum:1,productDataCount:0,megList:[],count:0,msgFileList:[]}},created:function(){this.$route.query.id?this.readMsg(this.$route.query.id):this.getUserMessageAll()},mounted:function(){},methods:{readMsg:function(t){var e=this;this.postRequest("platformnoticeflow/queryById",{id:t}).then(function(t){t.data&&0==t.data.state&&(e.geMsgFile([t.data.aaData]),e.productDataCount=1)})},getUserMessageAll:function(){var t=this;this.postRequest("platformnoticeflow/list",{customerId:this.userInfo.userId,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){e.data&&0==e.data.state&&(t.geMsgFile(e.data.aaData),t.productDataCount=e.data.dataCount)})},handleCurrentChange:function(t){this.pageNum=t,this.getUserMessageAll()},geMsgFile:function(t){var e=this;if(this.count<t.length){var a={sourceObjectType:"002",sourceObjectId:t[this.count].id};this.postRequest("uploadfilerecode/list",a).then(function(a){a.data&&0==a.data.state&&(a.data.aaData.length>0&&(t[e.count].file=a.data.aaData[0]),e.count++,e.geMsgFile(t))})}else this.megList=t},queryMsgFileByPage:function(){this.postRequest("platformnoticeflow/queryMsgFileByPage",{customerId:this.userInfo.userId,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){t.data&&0==t.data.state&&console.log(t.data.aaData)})}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userCenter"}},[a("shop-header"),t._v(" "),a("shop-search",{attrs:{showClassify:!1,pageName:"消息"}}),t._v(" "),a("section",{staticClass:"user-content"},[a("div",{staticClass:"min-width flex flex-x-between"},[t._m(0),t._v(" "),a("div",{staticClass:"user-content-r"},[a("div",{staticClass:"navbar flex flex-y-center"},[t._v("我的消息")]),t._v(" "),a("div",{staticClass:"main"},[t.megList.length>0?a("div",[a("ul",{attrs:{id:"msglist"}},t._l(t.megList,function(e){return a("li",[a("div",{staticClass:"flex flex-x-center"},[a("div",{staticClass:"date"},[t._v(t._s(e.publishedDate))])]),t._v(" "),a("div",{staticClass:"mes"},[a("div",{staticClass:"mes-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"mes-body"},[t._v(t._s(e.comment))]),t._v(" "),a("div",{staticClass:"mes-sender"},[t._v(t._s(e.customerName))]),t._v(" "),e.file?a("div",[a("span",[t._v("附件下载：")]),t._v(" "),a("a",{staticClass:"click-a",attrs:{href:t.imgURL+e.file.filePath+"?"+e.file.fileName}},[t._v(t._s(e.file.fileName))])]):t._e()])])})),t._v(" "),a("div",{staticClass:"flex flex-x-end",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{background:"",small:"",layout:"total,prev, pager, next",total:t.productDataCount,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}})],1)]):a("div",{staticClass:" flex flex-x-center flex-y-center",staticStyle:{height:"544px",color:"#d1d1d1"}},[t._m(1)])])])])]),t._v(" "),a("shop-footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-content-l"},[e("ul",[e("li",[e("strong",[this._v("消息")]),this._v(" "),e("p",[this._v("我的消息")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:a("vmrj")}}),this._v(" "),e("p",{staticClass:"tac"},[this._v("暂无消息")])])}]};var M=a("VU/8")(q,D,!1,function(t){a("ISTn")},null,null);e.default=M.exports}});
//# sourceMappingURL=18.ea9b4661d235e3e82fc8.js.map